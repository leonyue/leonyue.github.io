<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="baidu-site-verification" content="w9Akh6dPe4" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 8]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

<title>iOS动画和特效（五）layer隐式动画 | 岳得建的技术博客</title>
<meta name="author" content="岳得建">




<link rel="shortcut icon" href="" />

<link rel="stylesheet" type="text/css" href="/assets/css/style.css">

<link href="/pages/rss.xml" rel="alternate" title="岳得建的技术博客" type="application/atom+xml">



  </head>
  <body>
        <aside id="sidebar">
  <nav id="tags">
    <a href="/index.html" id="avatar" style="background-image:url(https://avatars1.githubusercontent.com/u/14903329?v=3&s=460)"></a>

    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
       
        <li id="技术" class="tags__li tags-btn">技术</li>
       
        <li id="iOS" class="tags__li tags-btn">iOS</li>
       
        <li id="专题" class="tags__li tags-btn">专题</li>
       
        <li id="web前端" class="tags__li tags-btn">web前端</li>
       
        <li id="流媒体" class="tags__li tags-btn">流媒体</li>
       
        <li id="C语言" class="tags__li tags-btn">C语言</li>
      
    </ul>

    <div id="tags__bottom">
      <a href="http://github.com/leonyue" id="icon-github" class="tags-btn fontello" target="_blank"></a>
      <a href="/pages/rss.xml" id="icon-feed" class="tags-btn fontello" target="_blank"></a>
      <a href="mailto:4940748@qq.com" id="icon-email" class="tags-btn fontello"></a>
    </div>
  </nav> <!-- end #tags -->

  <div id="posts-list">
    <form action="" id="search-form">
      <a href="/index.html" id="mobile-avatar" style="background-image:url(https://avatars1.githubusercontent.com/u/14903329?v=3&s=460)"></a>
      <!-- NOTE: input field is disabled by default -->
      <input id="search-input" type="text" placeholder="Search..." >
    </form>

    <nav id="pl__container">
    
      <a class="流媒体 pl__all" href="/2016/05/13/Media-decode.html"><span class="pl__circle"></span><span class="pl__title">FFmpeg深入分析之零-基础</span><span class="pl__date">May 2016</span></a>
    
      <a class="C语言 pl__all" href="/2016/05/12/method-as-parameter.html"><span class="pl__circle"></span><span class="pl__title">c语言向函数传递函数作为参数</span><span class="pl__date">May 2016</span></a>
    
      <a class="C语言 pl__all" href="/2016/05/12/fushu-buma-calculation.html"><span class="pl__circle"></span><span class="pl__title">负数补码运算</span><span class="pl__date">May 2016</span></a>
    
      <a class="C语言 pl__all" href="/2016/05/12/Pragma-pack.html"><span class="pl__circle"></span><span class="pl__title">pragma pack(非常有用的字节对齐用法说明)</span><span class="pl__date">May 2016</span></a>
    
      <a class="流媒体 pl__all" href="/2016/05/11/IJKPlayer_study.html"><span class="pl__circle"></span><span class="pl__title">IJKPlayer学习笔记</span><span class="pl__date">May 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/04/12/pod-multi-project-manager.html"><span class="pl__circle"></span><span class="pl__title">使用Pods和自定义静态库实现多工程联编</span><span class="pl__date">Apr 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/04/03/iOS-JavaScriptCore.html"><span class="pl__circle"></span><span class="pl__title">iOS JavaScriptCore使用</span><span class="pl__date">Apr 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/04/02/iOS-3DTouch-3.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(三) Force Properties-按压力度</span><span class="pl__date">Apr 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/04/01/iOS-3DTouch-2.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(二) peek and pop - 预览和弹出</span><span class="pl__date">Apr 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/03/21/iOS-3DTouch-1.html"><span class="pl__circle"></span><span class="pl__title">iOS 3D touch开发(一) Home Screen Quick Actions</span><span class="pl__date">Mar 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/03/10/iOS-unit-test.html"><span class="pl__circle"></span><span class="pl__title">iOS单元测试</span><span class="pl__date">Mar 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/29/iOS-objc-styleguide.html"><span class="pl__circle"></span><span class="pl__title">iOS objc编程规范</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/13/ios-networking-5.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（五）网络请求中的cookie</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/09/ios-networking-4.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（四） http异步文件上传和下载以及进度指示</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/04/ios-networking-3.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（三） http异步请求和https认证</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/03/ios-networking-2.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（二） http异步队列请求</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/02/03/ios-networking-1.html"><span class="pl__circle"></span><span class="pl__title">iOS networking（一） http同步请求</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="技术 pl__all" href="/2016/02/02/react-native-demo.html"><span class="pl__circle"></span><span class="pl__title">react-native（二） 自己写的react-native学习demo和整理的tips</span><span class="pl__date">Feb 2016</span></a>
    
      <a class="技术 pl__all" href="/2016/01/11/react-native-helloworld.html"><span class="pl__circle"></span><span class="pl__title">react-native（一） hello world</span><span class="pl__date">Jan 2016</span></a>
    
      <a class="iOS pl__all" href="/2016/01/06/iOS-app-versions.html"><span class="pl__circle"></span><span class="pl__title">api如何设计才能支撑多个不同版本的app共存</span><span class="pl__date">Jan 2016</span></a>
    
      <a class="web前端 pl__all" href="/2015/11/26/rem-em-px.html"><span class="pl__circle"></span><span class="pl__title">css3属性rem的使用</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/11/24/iOS-affine-transfermation-animation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（七）仿射变换-CGAffineTransform</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/11/22/iOS-library-spring.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（六）swift动画库spring使用和代码拆解</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/11/16/iOS-Implicit-Animation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（五）layer隐式动画</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/11/06/iOS-controller-transitioning.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（四）controller间的自定义过渡效果</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/11/01/iOS-MotionEffects.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（三）MotionEffects</span><span class="pl__date">Nov 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/10/30/iOS-UIKit-Dynamics.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（二）UIKit力学行为</span><span class="pl__date">Oct 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/10/30/iOS-Animation-UIViewAndCoreAnimation.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效（一）UIView动画和CoreAnimation</span><span class="pl__date">Oct 2015</span></a>
    
      <a class="专题 pl__all" href="/2015/10/29/iOS-animation-0.html"><span class="pl__circle"></span><span class="pl__title">iOS动画和特效专题（零）- 大纲和计划</span><span class="pl__date">Oct 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/10/17/ios-webView.html"><span class="pl__circle"></span><span class="pl__title">UIWebView和WKWebView的使用及js交互</span><span class="pl__date">Oct 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/10/06/ios-swift-quick.html"><span class="pl__circle"></span><span class="pl__title">swift5分钟语法速记</span><span class="pl__date">Oct 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/09/20/ios-macro.html"><span class="pl__circle"></span><span class="pl__title">ios宏的使用和技巧</span><span class="pl__date">Sep 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/09/11/ios-BLE-4.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（四）BabyBluetooth蓝牙库介绍</span><span class="pl__date">Sep 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/09/07/ios-BLE-3.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（三）app作为外设被连接的实现</span><span class="pl__date">Sep 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/09/02/ios-draw-Graffiti-2.html"><span class="pl__circle"></span><span class="pl__title">ios绘图demo,做一个涂鸦板(下)</span><span class="pl__date">Sep 2015</span></a>
    
      <a class="技术 pl__all" href="/2015/08/22/github-ImagesUploadWebSite.html"><span class="pl__circle"></span><span class="pl__title">自己markdown博客的图床程序</span><span class="pl__date">Aug 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/08/19/ios-ThreadAndAsynchronization.html"><span class="pl__circle"></span><span class="pl__title">ios的线程和同步异步操作</span><span class="pl__date">Aug 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/08/14/ios-BLE-2.html"><span class="pl__circle"></span><span class="pl__title">ios蓝牙开发（二）ios连接外设的代码实现</span><span class="pl__date">Aug 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/07/26/ios-draw-Graffiti.html"><span class="pl__circle"></span><span class="pl__title">ios绘图demo,做一个涂鸦板(上)</span><span class="pl__date">Jul 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/07/25/ios-draw-base.html"><span class="pl__circle"></span><span class="pl__title">ios绘图基础</span><span class="pl__date">Jul 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/07/17/ios-BLE-1.html"><span class="pl__circle"></span><span class="pl__title">iOS蓝牙开发（一）蓝牙相关基础知识</span><span class="pl__date">Jul 2015</span></a>
    
      <a class="专题 pl__all" href="/2015/07/17/ios-BLE-0.html"><span class="pl__circle"></span><span class="pl__title">iOS蓝牙的开发专题</span><span class="pl__date">Jul 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/06/14/ios-library-masonry.html"><span class="pl__circle"></span><span class="pl__title">Masonry的使用</span><span class="pl__date">Jun 2015</span></a>
    
      <a class="专题 pl__all" href="/2015/06/14/ios-library-0.html"><span class="pl__circle"></span><span class="pl__title">iOS中那些好用的第三方库</span><span class="pl__date">Jun 2015</span></a>
    
      <a class="iOS pl__all" href="/2015/05/29/ios-develop-tool.html"><span class="pl__circle"></span><span class="pl__title">提高iOS开发效率的工具</span><span class="pl__date">May 2015</span></a>
    
      <a class=" pl__all" href="/2015/05/28/spring-0.html"><span class="pl__circle"></span><span class="pl__title">Spring 0</span><span class="pl__date">May 2015</span></a>
    
      <a class="技术 pl__all" href="/2014/02/12/how-to-deploy-a-blog-on-github-by-jekyll.html"><span class="pl__circle"></span><span class="pl__title">在Github上搭建Jekyll博客和创建主题</span><span class="pl__date">Feb 2014</span></a>
    
    </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->
    <div id="post">
      <div id="pjax">
        <article id="post__content">
    <h1 id="post__title" data-identifier="20151116">iOS动画和特效（五）layer隐式动画</h1>
    <p>每个UIView都有一个layer属性，它的类型是CALayer，属于QuartzCore框架。CALayer本身并不包含在UIKit中，它不能响应事件。由于CALayer在设计之初就考虑它的动画操作功能，CALayer很多属性在修改时都能形成动画效果，这种属性称为“隐式动画属性”。
对每个UIView的非root layer对象属性进行修改时，都存在隐式动画。</p>

<p>CALayer常用的属性</p>

<p><img src="http://images.jumppo.com/uploads/layerProperty.png" alt="" /></p>

<p><strong>注意点</strong>
-   CALayer中很少使用frame属性，因为frame本身不支持动画效果，通常使用bounds和position代替
-   CALayer中透明度使用opacity表示而不是alpha；中心点使用position表示而不是center</p>

<h2 id="layer">一个简单的layer动画示例：</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>
        <span class="c1">//运动的layer</span>
        <span class="n">myLayer</span> <span class="o">=</span> <span class="kt">CALayer</span><span class="p">()</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">CGRect</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">redColor</span><span class="p">()</span><span class="o">.</span><span class="kt">CGColor</span>
        <span class="n">view</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="nf">addSublayer</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="p">)</span>

        <span class="c1">//layer每次点击像右下移动一些，如果超过范围则x从头开始</span>
        <span class="kd">func</span> <span class="nf">view1Clicked</span><span class="p">(</span><span class="nv">tapGesture</span><span class="p">:</span><span class="kt">UITapGestureRecognizer</span><span class="p">){</span>

            <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">greenColor</span><span class="p">()</span><span class="o">.</span><span class="kt">CGColor</span>
            <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.5</span>
            <span class="k">var</span> <span class="nv">moveToPoint</span>  <span class="o">=</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">myLayer</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">myLayer</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="mi">50</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="n">moveToPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="p">{</span> <span class="n">moveToPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">moveToPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">)</span> <span class="p">{</span> <span class="n">moveToPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">}</span>
            <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">moveToPoint</span>
        <span class="p">}</span>

</code></pre>
</div>

<h2 id="catransaction">CATransaction</h2>
<blockquote>
  <p>layer隐式动画实际上是自动执行了CATransaction，通过begin和commit进行入栈和出栈，并再run loop中执行一次0.25秒的隐式动画。通过CATranscation可以控制隐式动画的行为.UIView的begin-》commit动画底层也是使用CATranscation实现的。</p>
</blockquote>

<p>修改隐式动画的执行时间，从默认0.25秒改为1秒</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
    <span class="kd">func</span> <span class="nf">view1Clicked</span><span class="p">(</span><span class="nv">tapGesture</span><span class="p">:</span><span class="kt">UITapGestureRecognizer</span><span class="p">){</span>

        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">begin</span><span class="p">()</span>
        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">setAnimationDuration</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">greenColor</span><span class="p">()</span><span class="o">.</span><span class="kt">CGColor</span>
        <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="k">var</span> <span class="nv">moveToPoint</span>  <span class="o">=</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="n">myLayer</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="n">myLayer</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="mi">50</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">moveToPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="p">{</span> <span class="n">moveToPoint</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">moveToPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">)</span> <span class="p">{</span> <span class="n">moveToPoint</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">view</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">}</span>
        <span class="k">self</span><span class="o">.</span><span class="n">myLayer</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">moveToPoint</span>
        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">commit</span><span class="p">()</span>
    <span class="p">}</span>

</code></pre>
</div>

<p>代码和之前的也都差不多，只是多了这么几句,手动设置了CATranscation</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">begin</span><span class="p">()</span>
        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">setAnimationDuration</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="o">...</span>
        <span class="o">...</span>

        <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">commit</span><span class="p">()</span>

</code></pre>
</div>

<h2 id="catransaction-1">CATransaction的常见参数设置</h2>

<p>设置动画执行时间</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
    <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">setAnimationDuration</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

</code></pre>
</div>

<p>关闭隐式动画,这句话必须放在修改属性之前</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
     <span class="kt">CATransaction</span><span class="o">.</span><span class="nf">setDisableActions</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>

</code></pre>
</div>

<p>设置动画完成后的回调</p>

<div class="highlighter-rouge"><pre class="highlight"><code>        <span class="kt">CATransaction</span><span class="o">.</span><span class="n">setCompletionBlock</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
            <span class="kt">NSLog</span><span class="p">(</span><span class="s">"Animation complete"</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre>
</div>

<h2 id="section">动画的暂停与继续</h2>

<p>效果可以看demo，启动后点击uiview，会先移动0.2秒后停顿0.5秒后继续执行</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
    <span class="c1">//动画暂停</span>
    <span class="kd">func</span> <span class="nf">pause</span><span class="p">(){</span>
        <span class="k">let</span> <span class="nv">interval</span> <span class="o">=</span>  <span class="n">myLayer</span><span class="o">.</span><span class="nf">convertTime</span><span class="p">(</span><span class="kt">CACurrentMediaTime</span><span class="p">(),</span> <span class="nv">fromLayer</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">timeOffset</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="c1">//动画继续</span>
    <span class="kd">func</span> <span class="nf">resume</span><span class="p">(){</span>
        <span class="k">let</span> <span class="nv">interval</span> <span class="o">=</span> <span class="kt">CACurrentMediaTime</span><span class="p">()</span> <span class="o">-</span> <span class="n">myLayer</span><span class="o">.</span><span class="n">timeOffset</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">timeOffset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">beginTime</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="n">myLayer</span><span class="o">.</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">}</span>


</code></pre>
</div>

<h2 id="demo">demo</h2>
<hr />

<p><a href="https://github.com/coolnameismy/demo/tree/master/AnimationAndEffects">本文的demo下载</a></p>

<p>本文的代码对于的文件夹/ControllerTransitioning</p>

<ul>
  <li>ImplicitAnimationViewController.swift:隐式动画</li>
</ul>

<p>感谢收看，如果对大家有帮助，请<a href="https://github.com/coolnameismy">github上follow和star</a>，本文发布在<a href="http://liuyanwei.jumppo.com/">刘彦玮的技术博客</a>，转载请注明出处</p>

<h2 id="section-1">推荐的相关文章</h2>

<p><a href="http://www.objccn.io/issue-12-2/">Layer 中自定义属性的动画</a>
<a href="http://www.cocoachina.com/ios/20141022/10005.html">iOS开发之让你的应用“动”起来</a></p>

    <div class="declare">
        <div>

        </div>
    </div>
</article>
<!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=https://leonyue.github.io/2015/11/16/iOS-Implicit-Animation.html&text=iOS动画和特效（五）layer隐式动画" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://github.com/leonyue" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=https://leonyue.github.io/2015/11/16/iOS-Implicit-Animation.html&title=iOS动画和特效（五）layer隐式动画" target="_blank"></a>
    <div class="share-info">分享一下~</div>
</div>
<!-- end #post__share -->
<div id="disqus_thread" name="leonyue">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div>


            <!---->
    <!--<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a>-->
    <!--&nbsp;&nbsp;|&nbsp;&nbsp;Hosted on <a href="https://pages.github.com" target="_blank">Github</a></p>-->
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.pjax.js"></script>
<script src="/assets/js/nprogress.js"></script>
<script src="/assets/js/searchbox.js"></script>
<script src="/assets/js/script.js"></script>


    <script>
    //百度站点统计,排除localhost
    if(window.location.host.indexOf("localhost") ==-1){

        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    }
</script>
   </body>
 </html>